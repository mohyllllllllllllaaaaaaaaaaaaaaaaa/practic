{"version":3,"file":"todo-list.js","sources":["../src/js/todo-list.js"],"sourcesContent":["import * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/src/styles/main.scss';\nconst refs ={\n    input: document.querySelector(\".input-js\"),\n    button: document.querySelector(\".btn-add\"),\n    list: document.querySelector(\".todo-list\")\n}\nconst task = JSON.parse(localStorage.getItem(\"task\")) || [];\nexport const buttonUpdate =\n  '<button type=\"button\" class=\"btn-update\" ></button>';\nexport const buttonDelete =\n  '<button type=\"button\" class=\"btn-delete\" >del</button>';\n\nfunction createObject(){\n    return {\n        id:Date.now(),status:'todo',text: refs.input.value.trim(),\n    };\n}\nfunction updateLocalStorage(todo){\n\n    task.push(todo)\n    localStorage.setItem(\"task\", JSON.stringify(task));\n}\nfunction createMarkup(todo){\nconst curentButton = todo.status === \"todo\" ? buttonUpdate: buttonDelete;\nreturn `<li id=\"${todo.id}\" class=\"${todo.status}\"\n><p>${todo.text}</p>${curentButton}</li>`\n}\nfunction addTodo(){\n    const newTodo = createObject();\n    const markup = createMarkup(newTodo);\n    refs.list.insertAdjacentHTML(\"beforeend\", markup);\n    updateLocalStorage(newTodo);\n    refs.input.value = \"\";\n}\nrefs.button.addEventListener('click', addTodo );\nconst storageData = JSON.parse(localStorage.getItem(\"task\"));\nfunction reloadPage(){\n    if(!storageData || !storageData.length) return;\n    const markup = storageData.map(createMarkup).join(\"\");\n    refs.list.innerHTML = markup;\n}\nif(storageData !== null){\n    reloadPage()\n}\nfunction togolStatus(event){\n    if(event.target.nodeName !== \"LI\" ){\n        return;\n    }\n\n    if(event.target.classList.contains(\"todo\")){\nevent.target.classList.replace(\"todo\",\"complete\");\nevent.target.lastElementChild.remove();\nevent.target.insertAdjacentHTML(\"beforeend\", buttonDelete);\n}else {\n    event.target.classList.replace(\"complete\",\"todo\");\n    event.target.lastElementChild.remove();\nevent.target.insertAdjacentHTML(\"beforeend\", buttonUpdate);\n}\nupdateStatusStorage(event.target);\n}\nrefs.list.addEventListener('click',togolStatus);\nfunction updateStatusStorage(el){\n  const data = JSON.parse(localStorage.getItem(\"task\"));\n  const upData = data.map(todo => {\n    if(todo.id === +el.id ){\n        todo.status = el.classList[0];\n    }\n    return todo;\n  });\n  localStorage.setItem(\"task\", JSON.stringify(upData)); \n}\nfunction removeTodo(event){\n   if(!event.target.classList.contains(\"btn-delete\")){\n        return;\n    }\n    event.target.parentNode.remove();\n    removeLocalStorage(event.target.parentNode)\n}\nrefs.list.addEventListener('click', removeTodo);\nfunction removeLocalStorage(el){\n    const data = JSON.parse(localStorage.getItem(\"task\"));\n    const filteredData = data.filter(todo => todo.id !== +el.id)\n    localStorage.setItem(\"task\", JSON.stringify(filteredData));\n}\nfunction editTodo(event){\n    if(!event.target.classList.contains(\"btn-update\")) {\n        return;\n    }\n    const taskElements = event.target.closest(\"LI\");\n    const taskId = +taskElements.id;\n    const taskText = taskElements.querySelector(\"P\").textContent;\n    const modal = basicLightbox.create(`   <div class=\"modal\">\n            <input type=\"text\" id=\"edit-input\" value=\"${taskText}\" />\n            <button id=\"update-task\">Оновити</button>\n            <button id=\"close-modal\">Закрити</button>\n        </div>`);\n        modal.show();\n\n        const modalElement = modal.element();\n       modalElement.document.querySelector(\"#update-task\").addEventListener('click', () => {\n            const newText = document.querySelector(\"#edit-input\").value.trim();\n            if(newText){\n                taskElements.querySelector(\"P\").texContent = newText;\n                updateLocalStorageAfterEdit(taskId, newText);\n            }\n            modal.close();\n        });\n        modalElement.document.querySelector(\"#close-modal\").addEventListener('click', () => modal.close());\n        function updateLocalStorageAfterEdit(id, newText){\n            const data = JSON.parse(localStorage.getItem(\"task\")) || [];\n            const updateData = data.map(todo => {\n                if (todo.id === id){\n                    todo.text = newText;\n                }\n                return todo;\n            });\n            localStorage.setItem(\"task\", JSON.stringify(updateData));\n        }\n}\nrefs.list.addEventListener('click', editTodo);"],"names":["refs","task","buttonUpdate","buttonDelete","createObject","updateLocalStorage","todo","createMarkup","curentButton","addTodo","newTodo","markup","storageData","reloadPage","togolStatus","event","updateStatusStorage","el","upData","removeTodo","removeLocalStorage","filteredData","editTodo","taskElements","taskId","taskText","modal","basicLightbox.create","modalElement","newText","updateLocalStorageAfterEdit","id","updateData"],"mappings":"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"}